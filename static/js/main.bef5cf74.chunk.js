(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),i=(a(17),a(2)),u=a(5),l=a.n(u),s=a(8),m=a(9),d=a(10),h=new(function(){function e(){Object(m.a)(this,e),this._apiKey="331e5bdb0a5057d00f4ca0cbaee61f51",this._apiBase="https://api.openweathermap.org/data/2.5/"}return Object(d.a)(e,[{key:"getResourse",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t,"&appid=").concat(this._apiKey));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Error");case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWeatherFromCity",value:function(e){return this.getResourse("weather?q=".concat(e,"&units=metric"))}},{key:"getWeatherFromCoordinate",value:function(e,t){return this.getResourse("weather?lat=".concat(e,"&lon=").concat(t,"&units=metric"))}}]),e}()),E=Object(n.createContext)(),f=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(E.Provider,{value:Object(n.useReducer)(t,a)},c)};function p(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],a=e.getDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],r=e.getFullYear();return"".concat(t," ").concat(a," ").concat(n," ").concat(r)}var v=function(){return r.a.createElement("div",{className:"loadingio-spinner-eclipse-8kvgy5l71h"},r.a.createElement("div",{className:"ldio-0w1udl6720jf"},r.a.createElement("div",null)))};var y=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),l=u[0],s=u[1],m=Object(n.useContext)(E),d=Object(i.a)(m,2),f=d[0].CITIES,y=d[1];Object(n.useEffect)((function(){console.log("--------------------"),f.forEach((function(e){h.getWeatherFromCity(e.name).then((function(t){console.log(t.name,"-",t.main.temp),y({type:"UPDATE_CITIES",name:e.name,temprature:t.main.temp})})).catch((function(e){console.log(e),s("Can't update cities")}))})),localStorage.setItem("cities",JSON.stringify(f))}),[f]);var b=Object(n.useState)(!1),g=Object(i.a)(b,2),C=g[0],O=g[1],j=Object(n.useState)(null),I=Object(i.a)(j,2),w=I[0],S=I[1];return Object(n.useEffect)((function(){var e;navigator.geolocation&&new Promise((function(t,a){navigator.geolocation.getCurrentPosition(t,a,e),O(!0)})).then((function(e){h.getWeatherFromCoordinate(e.coords.latitude,e.coords.longitude).then((function(e){O(!1),S(e)}))})).catch((function(e){O(!1),console.log(e),s("Please allow geolocation assess or try later")}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,r.a.createElement("h3",{className:"error"},l),C&&r.a.createElement(v,null),r.a.createElement("div",{className:"current-city"},w&&r.a.createElement("div",{key:w.name},r.a.createElement("h4",null,"Weather in your city"),r.a.createElement("div",{className:"location-box"},r.a.createElement("div",{className:"location"},w.name,", ",w.sys.country),r.a.createElement("div",{className:"date"},p(new Date))),r.a.createElement("div",{className:"weather-box"},r.a.createElement("div",{className:"temp"},Math.round(w.main.temp),"\xb0c")))),r.a.createElement("div",{className:"search-box"},r.a.createElement("input",{type:"text",className:"search-bar",placeholder:"Search...",onChange:function(e){return c(e.target.value)},value:a}),r.a.createElement("button",{onClick:function(){s(""),0===f.filter((function(e){return e.name.toUpperCase()===a.toUpperCase()})).length?h.getWeatherFromCity(a).then((function(e){y({type:"ADD_CITY",name:e.name,country:e.sys.country,temprature:e.main.temp}),console.log(e)})).catch((function(e){console.log(e),s("Can't add city, check city name "+a)})):alert("Already exist"),c("")}},"ADD")),f.map((function(e){if(null===e||void 0===e?void 0:e.name)return r.a.createElement("div",{key:e.name},r.a.createElement("div",{className:"location-box"},r.a.createElement("div",{className:"location"},e.name,", ",e.country),r.a.createElement("div",{className:"date"},p(new Date))),r.a.createElement("div",{className:"weather-box"},r.a.createElement("div",{className:"temp"},Math.round(e.temprature),"\xb0c"),r.a.createElement("button",{onClick:function(){return function(e){y({type:"DELETE_CITY",name:e.name})}(e)}},"DELETE")))})).reverse()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=a(11),g=a(1),C={CITIES:JSON.parse(localStorage.getItem("cities"))||[]},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY":return Object(g.a)(Object(g.a)({},e),{},{CITIES:[].concat(Object(b.a)(e.CITIES),[{name:t.name,country:t.country,temprature:t.temprature}])});case"UPDATE_CITIES":return Object(g.a)(Object(g.a)({},e),{},{CITIES:e.CITIES.map((function(e){if(e.name===t.name)return Object(g.a)(Object(g.a)({},e),{},{temprature:t.temprature})}))});case"DELETE_CITY":return Object(g.a)(Object(g.a)({},e),{},{CITIES:e.CITIES.filter((function(e){return e.name!==t.name}))});default:return e}};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f,{initialState:C,reducer:O},r.a.createElement(y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.bef5cf74.chunk.js.map
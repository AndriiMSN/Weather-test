{"version":3,"sources":["ApiServise.js","StateProvider.js","DateBuild.js","Spinner.js","App.js","serviceWorker.js","reducer.js","index.js"],"names":["Api","_apiKey","_apiBase","url","fetch","this","res","ok","Error","json","city","getResourse","lat","lon","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","dateBuilder","d","day","getDay","date","getDate","month","getMonth","year","getFullYear","Spinner","className","App","useState","query","setQuery","error","setError","useContext","CITIES","dispatch","loading","setLoading","currentCity","setCurrentCity","useEffect","options","navigator","geolocation","Promise","resolve","reject","getCurrentPosition","then","position","getWeatherFromCoordinate","coords","latitude","longitude","result","catch","console","log","onClick","forEach","element","getWeatherFromCity","name","main","temp","type","temprature","update","key","sys","country","Date","Math","round","placeholder","onChange","e","target","filter","toUpperCase","length","alert","map","deleteCity","reverse","Boolean","window","location","hostname","match","JSON","parse","localStorage","getItem","state","action","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.154379c1.chunk.js","sourcesContent":["class ApiServise {\r\n  _apiKey = \"331e5bdb0a5057d00f4ca0cbaee61f51\";\r\n  _apiBase = \"https://api.openweathermap.org/data/2.5/\";\r\n\r\n  async getResourse(url) {\r\n    const res = await fetch(`${this._apiBase}${url}&appid=${this._apiKey}`);\r\n    if (!res.ok) {\r\n      throw new Error(\"Error\");\r\n    }\r\n    return await res.json();\r\n  }\r\n\r\n  getWeatherFromCity(city) {\r\n    return this.getResourse(`weather?q=${city}&units=metric`);\r\n  }\r\n\r\n  getWeatherFromCoordinate(lat, lon) {\r\n    return this.getResourse(`weather?lat=${lat}&lon=${lon}&units=metric`);\r\n  }\r\n}\r\n\r\nexport const Api = new ApiServise();\r\n","import React, { createContext, useContext, useReducer } from \"react\";\r\n\r\nexport const StateContext = createContext();\r\n\r\nexport const StateProvider = ({ reducer, initialState, children }) => (\r\n  <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n  </StateContext.Provider>\r\n);\r\n\r\nexport const useStateValue = () => useContext(StateContext);\r\n","export function dateBuilder(d) {\r\n  let months = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ];\r\n  let days = [\r\n    \"Sunday\",\r\n    \"Monday\",\r\n    \"Tuesday\",\r\n    \"Wednesday\",\r\n    \"Thursday\",\r\n    \"Friday\",\r\n    \"Saturday\",\r\n  ];\r\n\r\n  let day = days[d.getDay()];\r\n  let date = d.getDate();\r\n  let month = months[d.getMonth()];\r\n  let year = d.getFullYear();\r\n\r\n  return `${day} ${date} ${month} ${year}`;\r\n}\r\n","import React from \"react\";\r\n\r\nfunction Spinner() {\r\n  return (\r\n    <div className=\"loadingio-spinner-eclipse-8kvgy5l71h\">\r\n      <div className=\"ldio-0w1udl6720jf\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Spinner;\r\n","import React, { useEffect, useState } from \"react\";\nimport { Api } from \"./ApiServise\";\nimport { useStateValue } from \"./StateProvider\";\nimport { dateBuilder } from \"./DateBuild\";\nimport Spinner from \"./Spinner\";\n\nfunction App() {\n  const [query, setQuery] = useState(\"\");\n\n  const [error, setError] = useState(\"\");\n  const [{ CITIES }, dispatch] = useStateValue();\n\n  // UPDATE DATA WHERE APP REFRESH OR ADD/DALETE NEW CITY\n\n  const update = (CITIES) => {\n    console.log(\"--------------------\");\n    CITIES.forEach((element) => {\n      Api.getWeatherFromCity(element?.name)\n        .then((result) => {\n          console.log(result.name, \"-\", result.main.temp);\n          dispatch({\n            type: \"UPDATE_CITIES\",\n            name: element.name,\n            temprature: result.main.temp,\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n          setError(\"Can't update cities\");\n        });\n    });\n  };\n\n  // GET GEOPOSITION\n  const [loading, setLoading] = useState(false);\n\n  const [currentCity, setCurrentCity] = useState(null);\n\n  const getPosition = (options) => {\n    if (navigator.geolocation) {\n      new Promise(function (resolve, reject) {\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\n\n        setLoading(true);\n      })\n        //If user allow location service then will fetch data & send it to get-weather function.\n        .then((position) => {\n          Api.getWeatherFromCoordinate(\n            position.coords.latitude,\n            position.coords.longitude\n          ).then((result) => {\n            setLoading(false);\n            setCurrentCity(result);\n          });\n        })\n        .catch((error) => {\n          setLoading(false);\n          console.log(error);\n          setError(\"Please allow geolocation assess or try later\");\n        });\n    }\n  };\n\n  useEffect(() => {\n    getPosition();\n  }, []);\n\n  // SEARCH CITY\n  const search = () => {\n    setError(\"\");\n    if (\n      CITIES.filter((city) => city.name.toUpperCase() === query.toUpperCase())\n        .length === 0\n    ) {\n      Api.getWeatherFromCity(query)\n        .then((result) => {\n          dispatch({\n            type: \"ADD_CITY\",\n            name: result.name,\n            country: result.sys.country,\n            temprature: result.main.temp,\n          });\n          console.log(result);\n        })\n        .catch((error) => {\n          console.log(error);\n          setError(\"Can't add city, check city name \" + query);\n        });\n    } else {\n      alert(\"Already exist\");\n    }\n    setQuery(\"\");\n  };\n\n  const deleteCity = (city) => {\n    dispatch({\n      type: \"DELETE_CITY\",\n      name: city.name,\n    });\n  };\n\n  return (\n    <>\n      <main>\n        <button onClick={() => update(CITIES)}>UPDATE</button>\n        <h3 className=\"error\">{error}</h3>\n        {loading && <Spinner />}\n        <div className=\"current-city\">\n          {currentCity && (\n            <div key={currentCity.name}>\n              <h4>Weather in your city</h4>\n              <div className=\"location-box\">\n                <div className=\"location\">\n                  {currentCity.name}, {currentCity.sys.country}\n                </div>\n                <div className=\"date\">{dateBuilder(new Date())}</div>\n              </div>\n              <div className=\"weather-box\">\n                <div className=\"temp\">\n                  {Math.round(currentCity.main.temp)}°c\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n        <div className=\"search-box\">\n          <input\n            type=\"text\"\n            className=\"search-bar\"\n            placeholder=\"Search...\"\n            onChange={(e) => setQuery(e.target.value)}\n            value={query}\n          />\n          <button onClick={search}>ADD</button>\n        </div>\n        {CITIES.map((city) => {\n          if (city?.name) {\n            return (\n              <div key={city.name}>\n                <div className=\"location-box\">\n                  <div className=\"location\">\n                    {city.name}, {city.country}\n                  </div>\n                  <div className=\"date\">{dateBuilder(new Date())}</div>\n                </div>\n                <div className=\"weather-box\">\n                  <div className=\"temp\">{Math.round(city.temprature)}°c</div>\n                  <button onClick={() => deleteCity(city)}>DELETE</button>\n                </div>\n              </div>\n            );\n          }\n        }).reverse()}\n      </main>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export const initialState = {\r\n  CITIES: JSON.parse(localStorage.getItem(\"cities\")) || [],\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_CITY\":\r\n      return {\r\n        ...state,\r\n        CITIES: [\r\n          ...state.CITIES,\r\n          {\r\n            name: action.name,\r\n            country: action.country,\r\n            temprature: action.temprature,\r\n          },\r\n        ],\r\n      };\r\n    case \"UPDATE_CITIES\":\r\n      return {\r\n        ...state,\r\n        CITIES: state.CITIES.map((city) => {\r\n          if (city.name === action.name) {\r\n            return {\r\n              ...city,\r\n              temprature: action.temprature,\r\n            };\r\n          }\r\n        }),\r\n      };\r\n    case \"DELETE_CITY\":\r\n      return {\r\n        ...state,\r\n        CITIES: state.CITIES.filter((city) => city.name !== action.name),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { StateProvider } from \"./StateProvider\";\nimport reducer, { initialState } from \"./reducer\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider initialState={initialState} reducer={reducer}>\n      <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
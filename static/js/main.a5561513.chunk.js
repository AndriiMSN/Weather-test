(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=(a(17),a(2)),u=a.n(i),s=a(5),l=a(3),m=a(9),d=a(10),h=new(function(){function e(){Object(m.a)(this,e),this._apiKey="331e5bdb0a5057d00f4ca0cbaee61f51",this._apiBase="https://api.openweathermap.org/data/2.5/"}return Object(d.a)(e,[{key:"getResourse",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t,"&appid=").concat(this._apiKey));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Error");case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWeatherFromCity",value:function(e){return this.getResourse("weather?q=".concat(e,"&units=metric"))}},{key:"getWeatherFromCoordinate",value:function(e,t){return this.getResourse("weather?lat=".concat(e,"&lon=").concat(t,"&units=metric"))}}]),e}()),f=Object(n.createContext)(),E=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(f.Provider,{value:Object(n.useReducer)(t,a)},c)};function p(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],a=e.getDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],r=e.getFullYear();return"".concat(t," ").concat(a," ").concat(n," ").concat(r)}var v=function(){return r.a.createElement("div",{className:"loadingio-spinner-eclipse-8kvgy5l71h"},r.a.createElement("div",{className:"ldio-0w1udl6720jf"},r.a.createElement("div",null)))};var b=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(l.a)(o,2),m=i[0],d=i[1],E=Object(n.useContext)(f),b=Object(l.a)(E,2),y=b[0].CITIES,g=b[1];Object(n.useEffect)((function(){localStorage.setItem("cities",JSON.stringify(y))}),[y]);var O=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach((function(e){console.log(e),h.getWeatherFromCity(e.name).then((function(t){return g({type:"UPDATE_CITIES",name:e.name,temp:t.main.temp})}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=Object(n.useState)(!1),C=Object(l.a)(j,2),w=C[0],I=C[1],S=Object(n.useState)(null),T=Object(l.a)(S,2),N=T[0],k=T[1];return Object(n.useEffect)((function(){var e;navigator.geolocation&&new Promise((function(t,a){navigator.geolocation.getCurrentPosition(t,a,e),I(!0)})).then((function(e){h.getWeatherFromCoordinate(e.coords.latitude,e.coords.longitude).then((function(e){I(!1),k(e)}))})).catch((function(e){I(!1),console.log(e),d("Please allow geolocation assess or try later")}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,r.a.createElement("button",{onClick:function(){return O(y)}},"UPDATE"),r.a.createElement("h3",{className:"error"},m),w&&r.a.createElement(v,null),r.a.createElement("div",{className:"current-city"},N&&r.a.createElement("div",{key:N.name},r.a.createElement("h4",null,"Weather in your city"),r.a.createElement("div",{className:"location-box"},r.a.createElement("div",{className:"location"},N.name,", ",N.sys.country),r.a.createElement("div",{className:"date"},p(new Date))),r.a.createElement("div",{className:"weather-box"},r.a.createElement("div",{className:"temp"},Math.round(N.main.temp),"\xb0c")))),r.a.createElement("div",{className:"search-box"},r.a.createElement("input",{type:"text",className:"search-bar",placeholder:"Search...",onChange:function(e){return c(e.target.value)},value:a}),r.a.createElement("button",{onClick:function(){d(""),0===y.filter((function(e){return e.name.toUpperCase()===a.toUpperCase()})).length?h.getWeatherFromCity(a).then((function(e){g({type:"ADD_CITY",name:e.name,country:e.sys.country,temprature:e.main.temp}),console.log(e)})).catch((function(e){console.log(e),d("Can't add city, check city name "+a)})):alert("Already exist"),c("")}},"ADD")),y.map((function(e){if(null===e||void 0===e?void 0:e.name)return r.a.createElement("div",{key:e.name},r.a.createElement("div",{className:"location-box"},r.a.createElement("div",{className:"location"},e.name,", ",e.country),r.a.createElement("div",{className:"date"},p(new Date))),r.a.createElement("div",{className:"weather-box"},r.a.createElement("div",{className:"temp"},Math.round(e.temprature),"\xb0c"),r.a.createElement("button",{onClick:function(){return function(e){g({type:"DELETE_CITY",name:e.name})}(e)}},"DELETE")))})).reverse()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=a(11),g=a(1),O={CITIES:JSON.parse(localStorage.getItem("cities"))||[]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CITY":return Object(g.a)(Object(g.a)({},e),{},{CITIES:[].concat(Object(y.a)(e.CITIES),[{name:t.name,country:t.country,temprature:t.temprature}])});case"UPDATE_CITIES":return Object(g.a)(Object(g.a)({},e),{},{CITIES:e.CITIES.map((function(e){return e.name==t.name?Object(g.a)(Object(g.a)({},e),{},{temprature:t.temp}):Object(g.a)({},e)}))});case"DELETE_CITY":return Object(g.a)(Object(g.a)({},e),{},{CITIES:e.CITIES.filter((function(e){return e.name!==t.name}))});default:return e}};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,{initialState:O,reducer:j},r.a.createElement(b,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.a5561513.chunk.js.map